"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}window.rrpc=function(){var a=null;var b={};var d={};var e=1;var f="2.0";var g=null;var h=null;function i(){var a=e;e++;return a}function j(){if(a){a.close();a=null}var e=b;b={};d={};for(var f in e){e[f](null,new Error("WebSocket torn down"))}}function k(a){for(var b in a){return false}return true}function l(){if(k(b)&&k(d)){j()}}function m(a){var c=JSON.parse(a.data);var e=c.id[0];if("jsonrpc"in c){if(e in b){var j=b[e];delete b[e];delete d[e];var f=null;var g=null;var h=null;if("error"in c){var i=_typeof(c.error);if(i=="object"){f=c.error.message;g=c.error.code;h=c.error.data}else if(i=="string"){h=c.error}}j("result"in c?c.result:null,f,g,h);l()}}else if("type"in c){var k=c.type[0];var m=d[e];if(k in m){if(k==="progress"){m.progress(c.numerator[0],c.denominator[0])}else if(k==="info"){m.info(c.text[0])}}}}function n(b,c,d){var e=window.location.protocol==="https:"?"wss://":"ws://";a=new WebSocket(e+d+window.location.pathname+"x/websocket/");if(g){a.onerror=c}a.onopen=function(){h=d;a.onmessage=m;if(b){b()}}}function o(b,c){if(a){c()}else{n(c,function(){b(null,"Could not reconnect to web socket",-1,null)},h)}}function p(a){if(typeof a!=="function"){return l}else{return function(){a();l()}}}return{initialize:function initialize(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:window.location.host;j();g=b;n(p(a),b,c)},call:function call(c,e,g,h){var j=i();o(g,function(){if(g){b[j]=g;d[j]=_typeof(h)==="object"?h:{}}a.send(JSON.stringify({jsonrpc:f,method:c,params:e,id:j}))})},destroy:function destroy(){j()}}}();

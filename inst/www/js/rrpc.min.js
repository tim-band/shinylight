"use strict";function _typeof(a){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(a){return typeof a}}else{_typeof=function _typeof(a){return a&&typeof Symbol==="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}window.rrpc=function(){var e=null;var f={};var g={};var h=1;var i="2.0";var j=null;function a(){var a=h;h++;return a}function b(){if(e){e.close()}var a=f;f={};g={};for(var b in a){a[b](null,new Error("WebSocket torn down"))}}function c(a){var b=JSON.parse(a.data);var c=b.id[0];if("jsonrpc"in b){if(c in f){var d=f[c];delete f[c];delete g[c];d(b.result,b.error)}}else if("type"in b){var e=b.type[0];var h=g[c];if(e in h){if(e==="progress"){h.progress(b.numerator[0],b.denominator[0])}else if(e==="info"){h.info(b.text[0])}}}}function d(a,f,g){var h=window.location.protocol==="https:"?"wss://":"ws://";e=new WebSocket(h+g+window.location.pathname+"x/websocket/");if(j){e.onerror=f}e.onopen=function(){e.onmessage=c;e.onclose=function(c){b();d(a,j,g)};if(a){a()}}}return{initialize:function initialize(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:window.location.host;b();j=c;d(a,c,e)},call:function call(b,c,d,h){var j=a();if(d){f[j]=d;g[j]=_typeof(h)==="object"?h:{}}e.send(JSON.stringify({jsonrpc:i,method:b,params:c,id:j}))},destroy:function destroy(){b()}}}();

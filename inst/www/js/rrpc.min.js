"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}window.rrpc=function(){var a=null;var b={};var d={};var e=1;var f="2.0";var g=null;function h(){var a=e;e++;return a}function i(){if(a){a.close()}var e=b;b={};d={};for(var f in e){e[f](null,new Error("WebSocket torn down"))}}function j(a){var c=JSON.parse(a.data);var e=c.id[0];if("jsonrpc"in c){if(e in b){var f=b[e];delete b[e];delete d[e];f(c.result,c.error)}}else if("type"in c){var g=c.type[0];var h=d[e];if(g in h){if(g==="progress"){h.progress(c.numerator[0],c.denominator[0])}else if(g==="info"){h.info(c.text[0])}}}}function k(b,c,d){var e=window.location.protocol==="https:"?"wss://":"ws://";a=new WebSocket(e+d+window.location.pathname+"x/websocket/");if(g){a.onerror=c}a.onopen=function(){a.onmessage=j;a.onclose=function(a){console.log(a.type);console.log(a.message);i();k(null,g,d)};if(b){b()}}}return{initialize:function initialize(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var b=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:window.location.host;i();g=b;k(a,b,c)},call:function call(c,e,g,i){var j=h();if(g){b[j]=g;d[j]=_typeof(i)==="object"?i:{}}a.send(JSON.stringify({jsonrpc:f,method:c,params:e,id:j}))},destroy:function destroy(){i()}}}();
